<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   <table class="table none" style="border: 1px solid black;border-collapse:colapse;width:100vw"> <thead> <tr> <th>Name</th> <th>Date</th> <th>Quantity</th> <th>Purchase Price</th> <th>Price</th> <th>Cost</th> <th>Market Value</th> <th>Return</th> <th>% Return</th> </tr> </thead> <tbody class="table-body test-list"> <tr class= 'table-rows bitcoin'> <td style="text-align:center" class='name-td bitcoin'> <img src= 'https://assets.coingecko.com/coins/images/1/large/bitcoin.png?1547033579' style='width:20px'> <span>Bitcoin<span> </td> <td style="text-align:center" class='bitcoin'> 01.02.2020 </td> <td style="text-align:center" class='bitcoin'> 1 </td> <td style="text-align:center" class='purchase-price bitcoin'> 30000 </td> <td style="text-align:center" class='price bitcoin'>33384</td> <td style="text-align:center" class='cost bitcoin'>30000</td> <td style="text-align:center" class='market-value bitcoin'>33384</td> <td style="text-align:center" class='return bitcoin'>3384.00</td> <td style="text-align:center" class='percentage-return bitcoin'>11.28</td> </tr> </tbody> </table> <script> window.onload = function(e){ e.preventDefault(); let tablerows = document.querySelectorAll('.table-rows'); tablerows.forEach((tr)=>{ let coinId = tr.classList.value.slice(11); async function getCoinList(){ let response = await fetch("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=" + coinId + "&order=market_cap_desc&per_page=100&page=1&sparkline=false"); let data = await response.json(); return data; }; getCoinList().then((data)=>{ data.forEach((coin)=>{ tr.childNodes[9].textContent = coin.current_price; let price = parseFloat(coin.current_price); let quantityValue = parseFloat(tr.childNodes[5].textContent); let purchasePrice = parseFloat(tr.childNodes[7].textContent); let cost = tr.childNodes[11]; cost.textContent = quantityValue * purchasePrice; let costValue = cost.textContent; let marketValue = tr.childNodes[13]; marketValue.textContent = price * quantityValue; mValue = marketValue.textContent; let returns = tr.childNodes[15]; returns.textContent = (parseFloat(mValue) - parseFloat(costValue)).toFixed(2); let percentageReturns = tr.childNodes[17]; percentageReturns.textContent = ((parseFloat(mValue) - costValue)/(costValue) * 100).toFixed(2); }) }) }) } </script>
</body>
</html>